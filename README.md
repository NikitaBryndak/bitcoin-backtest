# Equity Backtest

Python toolkit for evaluating multiple trading strategies on equity price history. The project bundles data ingestion, factor engineering, signal generation, and performance reporting into a reproducible backtesting workflow.

## Features
- Automated daily price loading via `yfinance` with on-disk caching in `data/`
- Pluggable strategy layer including mean reversion, trend following, momentum, buy-and-hold, and an XGBoost classifier
- Vectorized backtester that applies transaction costs, tracks equity curves, and computes risk/return metrics
- Visualization utilities for equity curves plus Jupyter notebooks for exploratory analysis and pipeline prototyping

## Project Layout
```
equity-backtest/
├─ data/                 # Cached CSV files (auto-downloaded if missing)
├─ docs/                 # Project documentation assets
├─ notebooks/            # Research notebooks for data exploration & pipelines
├─ src/
│  ├─ data_pipeline.py   # DataLoader for CSV ingestion with yfinance fallback
│  ├─ engine/backtester.py
│  └─ strategies/        # Strategy implementations
└─ main.ipynb            # High-level interactive walkthrough
```

## Getting Started
1. Ensure you have Python 3.10+ available (`python --version`).
2. (Optional) create and activate a virtual environment:
   ```cmd
   python -m venv .venv
   .\.venv\Scripts\activate
   ```
3. Install dependencies:
   ```cmd
   pip install -r requirements.txt
   ```

## Running a Backtest
Execute the bundled strategies against equity spot data:
```cmd
python src\main.py
```
The script will:
- load `data/BTC.csv` (downloading from Yahoo Finance if the file is missing),
- run each strategy in sequence, applying a 0.1% fee per trade,
- print a metrics table (total return, annualized return/volatility, max drawdown, Sharpe ratio),
- plot equity curves for visual comparison.

Equity plotting relies on `matplotlib`. Run the script in an environment that supports displaying figures (e.g., local Python session, VS Code interactive window, or Jupyter notebook).

## Configuring Strategies
- **Strategy selection**: edit `strategies=[...]` inside `src/main.py` to add, remove, or reorder strategies.
- **Parameters**: instantiate strategies with desired hyperparameters, e.g. `MeanReversionStrategy(short_window=20, long_window=60)`.
- **Custom strategies**: inherit from `BaseStrategy` in `src/strategies/base_strategy.py`, implement `generate_features` and `generate_signals`, then add the strategy instance to the list.

## Working with Data
- Daily resolutions are generated by resampling the original data to 1-day frequency and forward-filling missing OHLC values.
- Additional tickers can be backtested by placing CSVs in `data/` or by invoking `DataLoader.load_data("TICKER")` from a custom driver script.
- The `DataLoader` automatically downloads history via Yahoo Finance when a ticker CSV is absent.

## Notebooks
`main.ipynb` offers an interactive overview, while the notebooks in `notebooks/` capture data pipelining and exploratory workflows. Install Jupyter (`pip install notebook`) if you want to run them locally.

## Development Notes
- Tests are not yet included. Consider adding PyTest suites around `Backtester` and each strategy when extending the project.
- Formatting, linting, and additional developer tooling are listed (commented) in `requirements.txt` if you wish to enable them.

## License
This project is distributed under the terms of the license provided in `LICENSE`.
